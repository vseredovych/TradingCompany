CREATE TABLE tblRoles(
    Id bigint IDENTITY(1,1) PRIMARY KEY,
    Name nvarchar(50)
);


CREATE TABLE tblProducts(
    Id bigint IDENTITY(1,1) PRIMARY KEY,
    Name nvarchar(50),
    Brand nvarchar(50),
    ProducingCountry nvarchar(50),
    Price int
);


CREATE TABLE tblSuppliers(
    Id bigint IDENTITY(1,1) PRIMARY KEY,
    Name nvarchar(50)
);


CREATE TABLE tblUsers(
    Id bigint IDENTITY(1,1) PRIMARY KEY,
    FirstName nvarchar(50),
    LastName nvarchar(50),
    Email nvarchar(50),
    HashPassword nvarchar(100),
    RoleId bigint
);

ALTER TABLE tblUsers(
   ADD CONSTRAINT FK_Users_Roles FOREIGN KEY (RoleId)
      REFERENCES tblRoles (Id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);



CREATE TABLE tblOrders(
    Id bigint IDENTITY(1,1) PRIMARY KEY,
    UserId bigint, 
    Destination nvarchar(50),
    OrderDate DateTime
);

ALTER TABLE tblOrders(
   ADD CONSTRAINT FK_Orders_Users FOREIGN KEY (UserId)
      REFERENCES tblUsers (Id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);



CREATE TABLE tblOrdersToProducts(
    OrderId bigint,
    ProductId bigint,
    Quantity int
);

ALTER TABLE tblOrdersToProducts(
   ADD CONSTRAINT FK_OrdersToProducts_Orders FOREIGN KEY (OrderId)
      REFERENCES tblOrders (Id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
   ADD CONSTRAINT FK_OrdersToProducts_Products FOREIGN KEY (ProductId)
      REFERENCES tblProducts (Id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);



CREATE TABLE tblSuppliersToProducts(
    SupplierId bigint,
    ProductId bigint 
);

ALTER TABLE tblSuppliersToProducts(
   ADD CONSTRAINT FK_SuppliersToProducts_Suppliers FOREIGN KEY (SupplierId)
      REFERENCES tblSuppliers (Id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
   ADD CONSTRAINT FK_SuppliersToProducts_Products FOREIGN KEY (ProductId)
      REFERENCES tblProducts (Id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);